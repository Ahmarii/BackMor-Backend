<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Event Detail</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        .event-detail {
            border: 1px solid #ccc;
            padding: 15px;
            background-color: #f9f9f9;
        }
        .event-title {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .event-info {
            font-size: 18px;
            margin-bottom: 10px;
        }
        .event-description {
            font-size: 16px;
            white-space: pre-wrap; /* Preserve newlines */
        }
    </style>
</head>
<body>
    <div class="event-detail">
        <div class="event-title">{{eventName}}</div>
        <div class="event-tag">{{eventTag}}</div>
        <div class="event-info">Date & Time: {{eventDateTime}}</div>
        <div class="event-info">Max People: {{maxPeople}}</div>
        <div class="event-description">{{eventDetail}}</div>
    </div>
    <div id="member-container"></div>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            fetch(`/eventMember/eventId?eventId={{eventId}}`)
                .then(response => response.json())
                .then(memberObj => {
                    const memberContainer = document.getElementById('member-container');
                    memberObj.forEach(member => {
                        const memberbox = document.createElement('div');
                        memberbox.className = 'memberbox'
                        memberbox.dataset.username = member.username

                        const memberUsername = document.createElement('div');
                        memberUsername.className = 'member-username';
                        memberUsername.textContent = member.username;

                        const memberImg = document.createElement('img');
                        memberImg.src = `http://localhost:5000/image/${member.username}`;
                        memberImg.alt = `${member.username}'s image`;
                        memberImg.className = 'member-image';
                        memberImg.style.maxWidth = '70px'; 
                        memberImg.style.maxHeight = '70px';   
                        memberImg.style.width = 'auto';       
                        memberImg.style.height = 'auto';

                        memberbox.appendChild(memberUsername);
                        memberbox.appendChild(memberImg);

                        memberbox.addEventListener('click', () => {
                            window.location.href = `/profile/${member.username}`;
                        });

                        memberContainer.appendChild(memberbox)
                        
                    })
                })
                .catch(error => {
                    console.error('Error fetching events:', error);
                });
        });
    </script>
</body>
</html>
